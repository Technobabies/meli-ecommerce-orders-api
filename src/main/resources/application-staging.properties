# --- PostgreSQL Database Configuration (For Staging) ---
# IMPORTANT: These environment variables MUST be set in Render dashboard:
# - STAGING_DB_URL: Full JDBC URL (e.g., jdbc:postgresql://host:6543/postgres?sslmode=require)
# - STAGING_DB_USER: Database username (usually 'postgres' for Supabase pooler)
# - STAGING_DB_PASSWORD: Database password
spring.datasource.url=${STAGING_DB_URL}
spring.datasource.username=${STAGING_DB_USER}
spring.datasource.password=${STAGING_DB_PASSWORD}
spring.datasource.driverClassName=org.postgresql.Driver

# Connection pool settings for better reliability
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# JPA/Hibernate settings
# This setting allows updates but validates schema
# Staging can be more permissive than production for testing migrations
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=false

